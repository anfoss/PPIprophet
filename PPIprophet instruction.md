## PPIprophet instruction

After successfully installing all the dependencies, the following command can
be directly run to test PPIprophet with the example dataset

```
python3 main.py -sid test/test_ids.txt
```

The default input and output folders are '/test/' and '/Output/' respectively,
under the PPIprophet working folder. It will generally take ~1 hr per file to
finish but the computation time increases exponentially depending on the nr of
protein ids in the file.

**We don't recommend submitting a global co-fractionation MS experiment due to
the exponential increase in computation resources and time needed for analysis
and the assumption of our FDR and WD score filters**.  

In the PPIprophet package, all parameters can be configured either via the
‘ProphetConfig.conf’ file or via by running PPIprophet using the command line. 
When running the PPIprophet, the parameters indicated in the command will be written
into the ‘ProphetConfig.conf’ file. Generally, four types of features are
needed:


## Input file

Input file need to be a wide format matrix with one essential columns:

__GN__ : Gene name or protein id, needs to be the first column. This is a
unique identifier and having duplicate rows will trigger a DuplicateError from PPIprophet.

Remaining columns needs to be ordered according to the fractionation scheme used. There is no strict requirement for column names apart from GN, but they need to be ordered.
All quantitation schemes commonly used in proteomics such as MS1 or MS2
ion-extracted chromatogram (XIC), spectral counts (SPCs) and TMT or SILAC
ratios are supported.

___We recommend acquiring the dataset using DIA-MS as it provides the best
balance between protein identification depth, consistency of peptide
identification and quantification accuracy___

Examples of correct formatting are provided under test/test_fract.txt data.

### Parameter setup


##### Global parameters:

```
-out The output folder (default 'Output')
-sid  Sample identifier file (default sample_ids.txt)
-fdr  False discovery rate threshold (default 0.5)
-crapome Crapome file or equivalent contaminant database (default crapome.org.txt)
-tresh Frequency threshold for crapome filtering (default 0.5)
-db Database (STRING format)
```

In case of using a PPI database, the format needs to be

|ProtA|ProtB|
|:----|:----|
|A    |B    |
|D    |A    |
|C    |E    |


All of the above parameters have the following default settings


| Parameter      | Default           |Possible                              |
| :--------------| :-----------------|:-------------------------------------|
| -output        | './Output'        |any                                   |
| -sid           | './sample_ids.txt'|any                                   |
| -fdr           | 0.3               |0-1                                   |
| -crapome       | 'crapome.org.txt' |any      |
| -thresh        | 0.5               |0-1                                |
| -db            | None               |any                               |



all parameters can be inspected using

```
python3 main.py --help
```

---
### Writing the experimental information file
The file ‘sample_ids.txt’ stores the experimental information and needs to contain the following headers:

| Sample     | cond      |group|short_id|repl|fr|
| :----------| :---------| :---|:-------|:---|:-|

- __Sample__ full path of the file intended to be processed
- __cond__ condition name
- __group__ group number (integer, needs to be 1 for control)
- __short_id__ alternative id
- __repl__ replicate number within the contiions
- __fr__ number of fractions per file


> **Note:**  In the ‘Sample’ column, please make sure that the content is identical with the testing file name (with the file extension).

Here is an example of a complete table with two conditions and three replicates:

| Sample     | cond      |group|short_id|repl|fr|
| :----------| :----- |:-----|:-----|:-----|:-----|
| ./Input/c1r1.txt     | Ctrl      |1|ipsc_2i_1|1|65|
| ./Input/c1r2.txt     | Ctrl      |1|ipsc_2i_2|2|64|
| ./Input/c1r3.txt     | Ctrl      |1|ipsc_2i_3|3|65|
| ./Input/c2r1.txt     | Treat1      |2|ipsc_ra_1|1|65|
| ./Input/c2r2.txt     | Treat1      |2|ipsc_ra_2|2|65|
| ./Input/c2r3.txt     | Treat1      |2|ipsc_ra_3|3|65|


---
### Running PPIprophet

PPIprophet can be using all default settings with


```
python3 main.py
```

Parameters can be individually set, for example using an interaction network
and a 10% false discovery rate

```
python3 main.py -db myppi.txt -fdr 0.1
```

----

### Interpreting prediction results
There will be two folders generated by the PPIprophet, including the ‘tmp’
folder and the user designated ‘Output’ folder. The ‘tmp’ folder stores all the
intermediate files for PPIprophet to process and therefore can be used for
debugging and validation. The ‘tmp’ folder can be safely deleted after
PPIprophet finishes all the prediction and analysis.

In the output folder the following text files are present:

- **adj_list.txt_test**: Adjacency list for the protein-protein interaction network
- **prot_tot_test.txt**: FDR-filtered protein-protein interaction network in a
  Cytoscape compatible format. The weight column is the prediction confidence.
  All tested protein pairs are reported but only positive predicted and
  FDR-filtered interactions have a weight value.
- **communities.txt**: Protein communities derived from the interaction network
- **d_scores.txt**: Modified WD scores for all interactions
- **prot_centr_test.txt**: Protein-centric view of the interactions. Each 'bait'
  protein has all identified interactions


### Contact
Please refer to [README.md](https://github.com/fossatiA/PPIprophet/blob/master/README.md) for how to contact us.